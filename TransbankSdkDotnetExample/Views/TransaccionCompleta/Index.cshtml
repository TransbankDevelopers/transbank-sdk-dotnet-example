@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Transacción Completa";
}

<div class="breadcrumbs-container">
    <div class="breadcrumbs-items">
        <a href="/">Inicio</a>
        <img src="~/t-arrow.svg" alt="t-arrow" width="24" height="24" />
    </div>
    <div class="breadcrumbs-items">
        <span class="current-breadcrumb">Webpay Transacción Completa</span>
    </div>
</div>

<h1>Transacción Completa - Formulario</h1>
<p class="mb-32">
    En esta primera etapa necesitas obtener los datos esenciales de la tarjeta de crédito, débito o prepago del titular. Utiliza el formulario para recolectar esta información de manera segura.
</p>

<div style="display: flex; justify-content: center; align-items: center;">
    <div class="tbk-card" style="width: 100%; max-width: none;">
        <form id="card-form" method="POST" action="/transaccion-completa/create">
            <div class="form-fields" style="width: min(92%, 450px); margin: 0 auto;">
                <div class="card-wrapper mb-32" style="display: flex; justify-content: center; width: 360px; margin: 0 auto 80px;"></div>

                <div class="input-container mb-16" style="margin-bottom: 16px;">
                    <label for="number" class="tbk-label">Número de tarjeta:</label>
                    <input type="text" id="number" name="number" class="tbk-input-text" placeholder="0000 0000 0000 0000" required value="4051 8856 0044 6623" style="width: 100%;">
                </div>

                <div class="row" style="display:flex; gap:16px;">
                    <div class="input-container" style="flex:1; min-width:0;">
                        <label for="expiry" class="tbk-label">Vencimiento (MM/YY):</label>
                        <input type="text" id="expiry" name="expiry" class="tbk-input-text" placeholder="MM/YY" required value="11/23" style="width:100%;">
                    </div>

                    <div class="input-container" style="flex:1; min-width:0;">
                        <label for="cvc" class="tbk-label">CVC:</label>
                        <input type="password" id="cvc" name="cvc" class="tbk-input-text" placeholder="123" required value="123" style="width:100%;">
                    </div>
                </div>
            </div>
        </form>

        <div class="card-border"></div>

        <div class="tbk-card-footer" style="display:flex; justify-content:space-between; align-items:center; width:100%;">
            <img src="~/credit.svg" alt="Logos de tarjetas de crédito" width="230" height="36" style="object-fit:contain;">
            <button type="submit" form="card-form" class="tbk-button primary">Pagar</button>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://cdnjs.cloudflare.com/ajax/libs/card/2.5.0/card.min.js"></script>
    <script>
        var card = new Card({
            form: '#card-form',
            container: '.card-wrapper',
            formSelectors: {
                numberInput: 'input[name="number"]',
                expiryInput: 'input[name="expiry"]',
                cvcInput: 'input[name="cvc"]',
                nameInput: 'input[name="name"]'
            },
            placeholders: {
                number: '•••• •••• •••• ••••',
                name: 'TEST USER',
                expiry: '••/••',
                cvc: '•••'
            },
            debug: false
        });

        document.querySelector('input[name="number"]').dispatchEvent(new Event('keyup'));
    </script>
}
